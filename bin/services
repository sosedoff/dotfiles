#!/usr/bin/env ruby

command = ARGV.shift || 'start'
services = %w(mysql postgres mongo redis elasticsearch)
lunchy = `which lunchy`.strip
unless lunchy.empty?
  unless %w(start stop).include?(command)
    $stderr.puts "Invalid command. Valid commands: start, stop."
    exit(1)
  end

  services.each do |s|
    puts "-> #{command} #{s}"
    `#{lunchy} #{command} #{s}`
  end
else
  $stderr.puts "Lunchy is not installed! Run 'gem install lunchy'."
end
  
